{{#view FLOW.MonitoringDataTableView}}
<section class="fullWidth" id="inspectData">
    <div class="floats-in" id="dataFilter">
      <h1>{{t _choose_survey_data_to_display}}:</h1>
      <div class="chooseSurveyData">
        {{view Ember.Select 
          contentBinding="FLOW.surveyGroupControl.arrangedContent"
          selectionBinding="FLOW.selectedControl.selectedSurveyGroup" 
          optionLabelPath="content.code" 
          optionValuePath="content.keyId"
          prompt=""
          promptBinding="Ember.STRINGS._select_survey_group"}}
	  </div>
	  <div class="dataCollectedDate">
	  </div>
		<div class="dataDeviceId">
		<label  class="devideId"> {{t _identifier}}:</label>
	    {{view Ember.TextField
          valueBinding="view.identifier"
          placeholder=""
          placeholderBinding="Ember.STRINGS._identifier"
          size=30}}
        <label  class="devideId"> {{t _display_name}}:</label>
        {{view Ember.TextField 
          valueBinding="view.displayName"
          placeholder=""
          placeholderBinding="Ember.STRINGS._display_name"
          size=30}}
			</div>
      <a {{action "doFindSurveyInstances" target="this"}} class="findData"> {{t _find}}</a>
    </div>
    <section class="fullWidth " id="devicesList">
      <table class="dataTable" id="surveyDataTable">
        <thead>
          <tr>
              <th class="noArrows"></th>
              <th class="noArrows">{{t _survey_group}}</th>
              <th class="noArrows">{{t _identifier}}</th>
              <th class="noArrows">{{t _display_name}}</th>
              <th class="noArrows">{{t _last_update}}</th>
              <th class="noArrows">{{t _action}}</th>
          </tr>
        </thead>
        <tbody>
          {{#each sl in FLOW.surveyedLocaleControl.content}}
            <tr>
              <td class="device">{{#view FLOW.DataNumView contentBinding="this"}}{{view.rownum}}{{/view}}</td>
              <td class="surveyGroup" style="text-align:left;">{{sl.surveyGroupId}}</td>
              <td class="identifier" style="text-align:left;">{{sl.identifier}}</td>
              <td class="displayName" style="text-align:left;">{{sl.displayName}}</td>
              <td class="collected">{{#with sl}}{{date1 lastUpdateDateTime}}{{/with}}</td>
              <td class="action">
                <a {{action showDetailsDialog sl target="this" }}>
                  {{t _view_details}}
                </a>
              </td>
            </tr>
            {{/each}}
        </tbody>
        <tfoot>
          <tr>
            <td colspan="7"><small>This is the footer.</small></td>
          </tr>
        </tfoot>
      </table>
      <ul class="prevNext">
        <li class="prevBtn">{{#if view.hasPrevPage}}
          <a {{action doPrevPage target='this'}}> &lsaquo; {{t _previous}}</a> {{/if}}
        </li>
        <li class="nextBtn">{{#if view.hasNextPage}}
          <a {{action doNextPage target='this'}}>{{t _next}} &rsaquo;</a>{{/if}}
        </li>
      </ul>
    </section>

    <!-- edit surveyInstance popup-->
    <div {{bindAttr class="view.showingDetailsDialog:display :overlay"}}>
      <div class="blanketWide"></div>
          <div class="dialogWrap">
        <!-- the dialog contents -->
        <div class="confirmDialog dialogWide">
		     <a {{action "closeDetailsDialog" target="this"}} class="ok clodeDialog">close window</a>

          <h2>{{t _details}}</h2>
            <nav class="editAnswerMenu"> 
          </nav>
        <p></p>
<section class="fullWidth " id="devicesList">
      <table class="dataTable" id="surveyDataTable">
        <thead>
          <tr>
              <th class="noArrows"></th>
              <th class="noArrows">{{t _id}}</th>
              <th class="noArrows">{{t _survey}}</th>
              <th class="noArrows">{{t _submitter}}</th>
              <th class="noArrows">{{t _device}}</th>
              <th class="noArrows">{{t _collected}}</th>
              <th class="noArrows">{{t _action}}</th>
          </tr>
        </thead>
        <tbody>
          {{#each SI in FLOW.surveyInstanceControl.currentContents}}
            <tr>
              <td class="device">{{#view FLOW.DataNumView contentBinding="this"}}{{view.rownum}}{{/view}}</td>
              <td class="device">{{SI.keyId}}</td>
              <td class="survey" style="text-align:left;">{{SI.surveyCode}}</td>
              <td class="submitter" style="text-align:left;">{{SI.submitterName}}</td>
              <td class="device">{{SI.deviceIdentifier}}</td>
              <td class="collected">{{#with SI}}{{date1 collectionDate}}{{/with}}</td>
              <td class="action">
                <a {{action showSurveyInstanceDialog sl target="this"}}>
                  {{t _view_details}}
                </a>
              </td>
            </tr>
            {{/each}}
        </tbody>
        <tfoot>
          <tr>
            <td colspan="7"><small>This is the footer.</small></td>
          </tr>
        </tfoot>
      </table>
      <ul class="prevNext">
        <li class="prevBtn">{{#if view.hasPrevPage}}
          <a {{action doPrevPage target='this'}}> &lsaquo; {{t _previous}}</a> {{/if}}
        </li>
        <li class="nextBtn">{{#if view.hasNextPage}}
          <a {{action doNextPage target='this'}}>{{t _next}} &rsaquo;</a>{{/if}}
        </li>
      </ul>
    </section>
         </div>
      </div>
    </div>
    <div {{bindAttr class="view.showingSurveyInstanceDialog:display :overlay"}}>
      <div class="blanketWide"></div>
          <div class="dialogWrap">
        <!-- the dialog contents -->
        <div class="confirmDialog dialogWide">
		     <a {{action hideSurveyInstanceDialog target="this"}} class="ok clodeDialog">close window</a>

          <h2>{{t _details}}</h2>
            <nav class="editAnswerMenu">
            <ul>
            </ul>
          </nav>
        <p>{{view.siString}}</p>

 <table class="dataTable" id="surveyDataTable">
            <!-- TABLE HEADER-->
            <thead>
                <tr>
                    <th class="noArrows">{{t _id}}</th>
                    <th class="noArrows">{{t _question}}</th>
                    <th class="noArrows">{{t _answer}}</th>                
                </tr>
            </thead>
            <!-- TABLE BODY: MAIN CONTENT-->
            <tbody>
                {{#each QA in FLOW.questionAnswerControl}}
                  {{#view FLOW.QuestionAnswerView contentBinding="QA"}}
                    <tr>
                      <td class="device">{{QA.keyId}}</td>
                      <td class="survey" style="text-align:left;">{{QA.questionText}}</td>
                    
                    <td class="submitter" style="text-align:left;">
                    {{#if view.inEditMode}}
                      {{#if view.isOptionType}}
                        {{view Ember.Select
                          contentBinding="view.optionsList"
                          optionLabelPath="content.value"
                          optionValuePath="content.value"
                          selectionBinding="view.optionChoice"}}
                        {{else}}
                          {{#if view.isNumberType}}
                            {{view Ember.TextField valueBinding="view.numberValue" size=10 }}
                          {{else}}
                            {{#if view.isTextType}}
                              {{view Ember.TextField valueBinding="view.value" size=10 }}
                            {{else}}
                              {{#if view.isDateType}}
                                {{view FLOW.DateField2 valueBinding="view.date" size=30}}
                              {{else}}
                                {{#if view.isBarcodeType}}
                                  {{t _the_barcode_app_on_the_device_is_used_here}}
                                  {{view Ember.TextField valueBinding="view.value" size=10 }}
                                {{/if}}
                              {{/if}}
                            {{/if}}
                          {{/if}}
                        {{/if}}
                      <a {{action doSave target="this"}} class="smallBtn">{{t _save}}</a> <a {{action doCancel target="this"}}>{{t _cancel}}</a>
                    {{else}}
                      {{#if view.isNotEditable}}
                        {{#if view.isPhotoType}}
                          {{QA.value}}  <a {{bindAttr href="view.photoUrl"}} target="_blank">Open photo</a> 
                        {{else}}
                          {{QA.value}}
                        {{/if}}
                      {{else}}
                        {{#if view.isDateType}}
                        <a {{action doEdit target="this"}}>{{#with QA}}{{date3 value}}{{/with}}</a>
                        {{else}}
                          <a {{action doEdit target="this"}}>{{QA.value}} {{#with QA}}{{if_blank value}}{{/with}}</a>
                        {{/if}}
                      {{/if}}
                    {{/if}}
                    </td>
                    </tr>
                    {{/view}}
                {{/each}}
            </tbody>
            <!-- TABLE FOOTER-->
            <tfoot>
                <tr>
                    <td colspan="7"><small>This is the footer.</small></td>
                </tr>
            </tfoot>
        </table>

        </div>
      </div>
    </div>
</section>
{{/view}}